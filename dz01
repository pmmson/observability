Описание:

На виртуальной машине установите любую open source CMS, которая включает в себя следующие компоненты: nginx, php-fpm, database (MySQL or Postgresql)
На этой же виртуальной машине установите Prometheus exporters для сбора метрик со всех компонентов системы (начиная с VM и заканчивая DB, не забудьте про blackbox exporter, который будет проверять доступность вашей CMS)
На этой же или дополнительной виртуальной машине установите Prometheus, задачей которого будет раз в 5 секунд собирать метрики с экспортеров.
  ==================================================================

Созданы 2 виртуальные машины
На одной из установлена October CMS (https://octobercms.com/)
Проверяем и обновляем пакеты системы
  sudo apt update -y
  sudo apt upgrade -y

1. Устанавливаем Node Exporter

Скачиваем дистрибутив (https://github.com/prometheus/node_exporter/releases)
wget https://github.com/prometheus/node_exporter/releases/download/v1.8.2/node_exporter-1.8.2.linux-amd64.tar.gz
        
Распаковываем
tar -xzvf node_exporter-1.8.2.linux-amd64.tar.gz

node_exporter-1.8.2.linux-amd64
├── LICENSE
├── node_exporter
└── NOTICE

Создаем пользователя prometheus
sudo useradd -rs /bin/false prometheus

Копируем бинарный файл экспортера в /usr/local/bin
cp node_exporter-1.8.2.linux-amd64/node_exporter /usr/local/bin/

Наделяем правами пользователя prometheus
sudo chown prometheus:prometheus /usr/local/bin/node_exporter

Создаем сервис
sudo nano /etc/systemd/system/node_exporter.service

[Unit]
Description=Node Exporter
After=network.target
[Service]
User=prometheus
Group=prometheus
Type=simple
ExecStart=/usr/local/bin/node_exporter
[Install]
WantedBy=multi-user.target

Запускаем сервис и устанавливаем автозапуск, проверяем статус
sudo systemctl start node_exporter.service
sudo systemctl enable node_exporter.service
sudo systemctl status node_exporter.service

● node_exporter.service - Node Exporter
     Loaded: loaded (/etc/systemd/system/node_exporter.service; enabled; preset: enabled)
     Active: active (running) since Thu 2025-01-02 11:34:39 UTC; 1min 39s ago
   Main PID: 2562 (node_exporter)
      Tasks: 3 (limit: 2274)
     Memory: 7.1M (peak: 7.4M)
        CPU: 205ms
     CGroup: /system.slice/node_exporter.service
             └─2562 /usr/local/bin/node_exporter

